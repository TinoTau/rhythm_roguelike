# 🎼 Rhythm Roguelike —— Boss 终结演出完整脚本（Final Broadcast）
## 用于：表达主导权确立 / 主线完成 / 高难挑战完成

> 本文档定义一次 **完整、可复用、可参数化的 Boss 终结演出流程**，  
> 适配你当前的 **多段式战斗系统 + 音乐生成 + 模拟人声 Final Broadcast** 设计。
>
> **设计理念**（根据统一设计文档）：
> - Boss 不是敌人，而是单一、极其稳定的强势流派
> - 终结演出不是"击杀"，而是"合奏主导权的转移"
> - 玩家的表达成为合奏中的主导声音
>
> 本脚本不涉及数值判定，仅作用于 **演出层（Presentation Layer）**，  
> 可直接交付给：音频 / 动画 / 程序 / 关卡团队协同实现。

---

## 一、触发前置条件（Trigger Conditions）

终结演出 **仅在以下任一条件满足时触发**：

1. 玩家表达清晰度 ≥ 阈值 且 主导度 ≥ 阈值
2. 玩家完成多段曲子全部段落（A–B–C–D）
3. 系统判定进入【结构完成态 / Structure Completed】
4. Boss 不再主导表达（合奏主导权转移）

⚠️ 若玩家表达被淹没、中断、或主动退出，不触发该演出。

---

## 二、终结演出总体结构（Timeline）

终结演出总时长建议：**8–15 秒**（可跳过）

```
T0   →  T1   →  T2   →  T3   →  T4
冻结    聚焦    广播    打击    余波
```

| 阶段 | 名称 | 作用 |
|---|---|---|
| T0 | 时间冻结 | 告知"表达已确立" |
| T1 | 结构聚焦 | 强化完成感 |
| T2 | Final Broadcast | 播放完整歌曲（含人声） |
| T3 | 主导权转移 | Boss 表达退场演出 |
| T4 | 演出余波 | 平滑返回结算 |

---

## 三、详细脚本分段说明

---

## T0｜时间冻结（0.5–1.0 秒）

**目的**：明确"表达主导权已确立"，切断操作层。

### 音频
- 当前背景音乐：  
  → **立即冻结在当前小节**
- 加入极短的低频冲击（Sub Hit）

### 画面
- 镜头瞬间定格
- Boss 与玩家模型保持动作姿态
- 轻微屏幕震动（一次）

### UI
- 所有操作 UI 渐隐（200 ms）
- 仪表盘停止刷新

---

## T1｜结构聚焦（1.0–2.0 秒）

**目的**：告诉玩家“你完成了一首作品”。

### 音频
- 播放一段 **过渡音效（Structure Resolve SFX）**
- 音高与玩家曲子主调一致

### 画面
- 镜头缓慢拉远
- 背景空间开始“折叠 / 对齐”
- 四音轨 UI 元素以视觉形式向中心汇聚

### UI
- 中央显示文字（小字）：
  > STRUCTURE COMPLETED

---

## T2｜Final Broadcast（3.0–6.0 秒，核心）

**目的**：播放“最终版本的歌曲”，包括模拟人声。

### 音频（关键）

播放内容：
- 玩家完整多段曲子
- 在最终段叠加：
  - **模拟人声轨（Vocalise / Scat / Synth Vocal）**

人声规则：
- 无明确歌词
- 音量 ≤ 主音 -6 dB
- 不抢节奏主导权
- 仅出现 1 次（不可循环）

### 画面
- 镜头保持中远景
- 玩家角色进入"执行姿态"
- Boss（强势表达者）开始出现结构裂纹 / 表达退场迹象

### UI
- 无常规 UI
- 右下角可选：
  - [跳过演出]

---

## T3｜主导权转移（与 T2 同步）

**目的**：将音乐高潮转译为"表达主导权确立"。

### 转移逻辑（非逐拍）

- 按以下事件触发主导权转移动画：
  1. 段落边界
  2. 情绪峰值
  3. 人声首次出现

### 动画表现
- 非连续攻击
- 而是：
  - Boss 表达逐渐退场
  - 强势流派的结构逐渐消散
  - 玩家的表达成为合奏中的主导声音

### Boss 状态
- 不播放痛苦动作
- 而是"表达退场 / 主导权转移"
- 体现为：Boss 的节奏逐渐被玩家的节奏覆盖，最终完全融入玩家的表达

---

## T4｜演出余波（1.5–3.0 秒）

**目的**：情绪回落，安全回到游戏流程。

### 音频
- 人声结束
- 仅保留节奏 / Pad
- 渐弱（Fade Out）

### 画面
- Boss 的表达完全退场，融入玩家的合奏
- 场景光线恢复稳定，体现为"合奏达成共识"

### UI
- 结算 UI 缓慢淡入
- 唱片图标展示：
  - 本次完成的曲子（颜色 = 流派纯度）

---

## 四、可跳过逻辑（必须）

- 玩家在 T2 / T3 可选择跳过
- 跳过时：
  - 立即执行 T4 状态
  - 音频淡出 300 ms
- 跳过不会影响奖励

---

## 五、参数化设计（给程序）

| 参数 | 用途 |
|---|---|
| broadcast_length | Final Broadcast 时长 |
| vocal_style | 人声风格（按流派） |
| camera_intensity | 镜头运动幅度 |
| boss_break_pattern | 崩解方式 |
| skippable | 是否允许跳过 |

---

## 六、使用场景建议

| 场景 | 是否使用 |
|---|---|
| 普通战斗 | ❌ |
| 强势表达者（精英） | 可选 |
| Boss 战（强势流派） | ✅ |
| 主线通关 | ✅ |
| 高难挑战 | ✅ |

---

## 七、设计总结（可直接引用）

> 当一首曲子被完整表达，  
> 系统不再需要你继续战斗。
>
> 它只做一件事：  
> **把你的作品，广播给这个世界。**

---

## 八、与统一设计理念的对应

根据 **统一设计文档**，本演出脚本体现：

- **世界观层面**：Boss 是其他流派/系统化演奏者/强势表达的具象化
- **战斗系统层面**：胜利 = 成为合奏中的主导声音
- **情绪体验层面**：成功 = 表达被识别，在压力下保持自我

> **本作的战斗不是对抗敌人，  
> 而是在多种风格同时存在的世界中，  
> 通过稳定、清晰、持续的表达，  
> 让自己的声音成为主导。**

（完）

# 🎮 Rhythm Roguelike 关卡与局（Run）设计说明

> 本文档基于 V3 战斗系统和 docs2/world、docs2/social 更新

---

## 一、世界与关卡结构

- 世界由 **8–10 个区域（Region）** 构成
- 每个区域包含 **20 个难度层级（Depth）**
- 每个难度包含 **10 个关卡（Level）**
- 玩家每次进入游戏：
  - 选择一个区域的某个难度
  - 连续完成 10 个关卡，构成一局（Run）

### 1.1 难度层级划分（根据 docs2/world 补充）

- **1–10 层**：基础结构验证区（显性结构验证，主线所需）
- **11–20 层**：深层结构测试区（隐藏结构探索，系统极限测试）
- **20 层以后**：赛博核心区域（系统的真实防线，默认多人协作）

### 1.2 深层挑战机制（根据 docs2/world 和 docs2/social 补充）

**15 层开始**：
- 区域被视为高风险结构区
- 玩家需要支付代币才能进入（深层进入费用）
- 失败不会退还代币
- 成功可获得更高的货币回报（高风险回报）

**20 层以后（赛博核心区域）**：
- 默认假设需要多人协作
- 单人完成极其困难
- 系统会提供特殊的界面反馈、演出方式或战斗 UI
- 强调沟通与协作
- 奖励偏向外观、UI、演出表现

---

## 二、关卡的核心单位

> **1 个关卡 = 1 场战斗 = 1 首完整曲子**

根据 V3 战斗系统：

- 每个关卡内：
  - 玩家创作一首限定条件的歌曲
  - 战斗段落：4~8 段乐曲（根据风格流派不同）
  - 每段 1~3 个回合
- 战斗胜负不依赖"打空血条"，而依赖：
  - 是否在较少段数内完成音乐结构
  - 是否成功修复音轨，消灭干扰体
  - 是否在 8 段内完成修复（否则挑战失败）

---

## 三、局（Run）的意义

- 一局不是"完成一首歌"，而是：
  - 连续创作 10 首歌
- 局内成长体现在：
  - 构筑成型（卡池逐步净化）
  - 流派倾向明确（风格流派纯度提升）
  - **后续关卡更容易做出好听的歌**

### 3.1 局内卡池构筑（根据 V3 战斗系统）

**卡池系统**：
- 每局开始时，玩家获得卡牌池（各音轨 5 张随机卡牌）
- 每条音轨展示 1 张（可见），其余 4 张背面（信息被加密）
- 通过战斗后奖励选择卡牌（3 选 1 或 5 选 2）
- 通过暗网商人删除不需要的卡牌

**构筑过程**：
- 随着玩家对自己卡池的构筑，风格流派越来越成熟
- 风格流派越统一，敌人能够造成迷惑的空间越来越小
- 干扰体的干扰能力是随着玩家卡池净化而减少的

---

## 四、难度与体验目标

- 低难度：
  - 允许新手通过增加段数完成战斗
  - 允许新手通过多回合逐步修复音轨
- 高难度：
  - 要求玩家用更少段数完成完整结构
  - 要求玩家更快做出正确判断，更快结束段落
- 好听程度 = 熟练度反馈，而非硬失败条件

### 4.1 段落数量与奖励关系（根据 V3 战斗系统）

| 段数 | 奖励评价 | 体验含义 |
|------|---------|---------|
| 4 段 | 完美表达 | 高效、好听、专业 |
| 5-6 段 | 稳定完成 | 标准完整曲式 |
| 7-8 段 | 勉强完成 | 结构松散，音乐质量下降 |

### 4.2 段落延长的代价

当段数 > 6 时：
- 音乐密度逐步下降
- 重复感增强
- 终结演出简化
- 结算界面提示："结构松散完成"

---

## 五、进度回退机制（根据 docs2/world 补充）

### 5.1 回退机制

当玩家在某一区域推进过深时：
- 系统会强制回收另一套结构的稳定性
- 以防止单一理解方式"统治整个空间"
- 推进一个区域，另一个区域发生结构回退

**世界观解释**：
- 这不是惩罚，而是一种**全局平衡机制**
- 世界不会允许单一结构方式长期占据主导
- 这使得玩家必须在多个区域之间进行权衡与取舍

### 5.2 传送服务的必要性（根据 docs2/social 补充）

由于进度回退机制的存在：
- 玩家很难长期维持多个区域的高层进度
- 某些奖励要求特定区域组合

**传送服务**：
- 允许玩家绕过回退带来的重复推进
- 精确进入目标区域与深度
- 由玩家提供，玩家自行定价
- 系统只负责撮合与结算

---

## 六、货币系统（根据 docs2/social 补充）

### 6.1 货币获取方式

**基础获取**：
- 每完成一场战斗（一个关卡）即可获得局外货币
- 深度越高，基础回报越高

**高风险回报**：
- 15 层以上挑战提供显著更高收益
- 失败不会获得补偿

### 6.2 货币消耗与回收

**深层进入费用**：
- 从 15 层开始，进入关卡需要支付代币
- 这是系统层面的货币回收机制

**挑战前准备**：
- 熟练玩家的主要消费集中在挑战前
- 通过特定区域 + 层级组合，激活临时增益
- 这些增益只影响结构倾向，不提高数值

### 6.3 经济系统原则

1. 不售卖直接数值优势
2. 所有高收益都伴随高风险
3. 玩家决定价格，系统维持秩序
4. 货币用于调度时间与结构机会，而非胜负

**货币的意义**：
> **调度表达资源**，而不是购买力量。

---

## 七、社交系统（根据 docs2/social 补充）

### 7.1 服务交易系统

**玩家定价的服务模式**：
- 传送服务由玩家提供
- 提供者自行定价
- 系统只负责撮合与结算

**可交易的服务包括**：
- 区域 + 层级传送
- 协作进入赛博核心区域
- 新手引导陪跑

### 7.2 老带新机制

**经济激励**：
- 系统不强制教学，而是通过经济激励鼓励老玩家参与
- 新手可购买陪跑或协作服务
- 老玩家可自由定价
- 成功完成后双方获得额外奖励

**设计理念**：
> 让玩家的理解、经验与时间，成为可以被他人需要的资源。

### 7.3 广播与榜单

**付费广播**：
- 玩家可消耗货币进行广播
- 公布自己的创作成果
- 宣传可提供的服务
- 参与榜单竞争
- 收藏其他玩家的创作
- 广播不提供战斗优势，只提供曝光

**被动收益模式**：
- 高级玩家可开启传送门+自动广播服务信息+挂机等待其他玩家使用
- 创作被收藏时获得收益
- 这形成稳定的货币回流渠道，俗称"现金奶牛"

**排行榜**：
- 广播里还应该有流行/分类排行榜
- 供其他玩家随时听歌或者收藏

---

## 八、设计总结

### 8.1 核心机制

1. **关卡结构**：区域 + 难度层级 + 10 个关卡 = 一局
2. **局内成长**：卡池构筑、流派纯度提升
3. **进度回退**：全局平衡机制，防止单一结构方式主导
4. **货币系统**：调度表达资源，不购买力量
5. **社交系统**：服务交易、老带新、广播与榜单

### 8.2 设计目标

> **世界不会奖励最强的个体，而会奖励  
> 最擅长与他人共同完成结构的人。**

---

（完）
